{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "App.svelte",
    "Chat.svelte",
    "ChatMsg.svelte",
    "GridDataEdit.svelte"
  ],
  "sourcesContent": [
    "<script lang=\"ts\">import Chat from \"./Chat.svelte\";\r\nimport GridData from \"./GridData.svelte\";\r\n</script>\n\n<style>\n\t.container {\n\t\tmax-height: 100vh;\n\t\theight: 100vh;\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr;\n\t}\n</style>\n\n<div class=\"container\">\n\t<div class=\"left\">\n\t\t<Chat />\n\t</div>\n\t<div class=\"right\">\n\t\t<GridData />\n\t</div>\n</div>\n",
    "<script lang=\"ts\">import ChatMsg from \"./ChatMsg.svelte\";\r\nimport { intercom } from \"./Intercom\";\r\nimport { chatMessages } from \"./ChatData\";\r\nlet chatInput = \"\";\r\nfunction onKeyUp(event) {\r\n    if (event.key === \"Enter\" && chatInput.length != 0) {\r\n        intercom.send({ type: \"chat\", text: chatInput.trim() });\r\n        chatInput = \"\";\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .container {\r\n        display: grid;\r\n        width: auto;\r\n        max-height: 100vh;\r\n        height: 100vh;\r\n        grid-template-rows: 1fr min-content;\r\n    }\r\n    .log{\r\n        overflow-y: auto;\r\n    }\r\n    .chat-input {\r\n        box-sizing: border-box;\r\n        padding: 8px;\r\n        background-color: lavender;\r\n        display: flex;\r\n    }\r\n\r\n    input {\r\n        flex-grow: 1;\r\n        flex-shrink: 1;\r\n    }\r\n</style>\r\n\r\n<div class=\"container\">\r\n    <div class=\"log\">\r\n        {#each $chatMessages as message}\r\n            <ChatMsg {message} />\r\n        {/each}\r\n    </div>\r\n    <div class=\"chat-input\">\r\n        <input\r\n            type=\"text\"\r\n            placeholder=\"Here you can write your chat-message\"\r\n            bind:value={chatInput}\r\n            on:keyup={onKeyUp} />\r\n    </div>\r\n</div>\r\n",
    "<script lang=\"ts\">;\r\nexport let message;\r\n</script>\r\n\r\n<style>\r\n    .container {\r\n        display: grid;\r\n        grid-template-columns: 200px 1fr;\r\n        justify-items: start;\r\n    }\r\n    code{\r\n        white-space: pre;\r\n    }\r\n</style>\r\n\r\n<div class=\"container {message.type}\">\r\n    <div class=\"time\">{message.time.toISOString()}</div>\r\n    <div class=\"body\">\r\n        <div class=\"text\">{message.text}</div>\r\n        {#if message.code}<code>{message.code}</code>{/if}\r\n    </div>\r\n</div>\r\n",
    "<script lang=\"ts\">import { intercom } from \"./Intercom\";\r\nimport { gridStore } from \"./DataGrid\";\r\nexport let x;\r\nexport let y;\r\nvar value = 0;\r\nvar isFrozen = false;\r\nvar isFrozenByMe = false;\r\nvar canEdit = true;\r\nvar useAutoLock = true;\r\nvar lockedByOthers = false;\r\nvar title = \"\";\r\nvar inputEl;\r\nvar lastGridData = undefined;\r\n$: {\r\n    const gridData = $gridStore;\r\n    if (JSON.stringify(gridData) !== JSON.stringify(lastGridData)) {\r\n        const field = gridData.fields[y * gridData.width + x];\r\n        value = field.value;\r\n        isFrozen = (field.frozenByClientIds || []).length > 0;\r\n        isFrozenByMe = (field.frozenByClientIds || []).some((z) => z == intercom.id);\r\n        lockedByOthers =\r\n            typeof field.lockedByClientId == \"number\" &&\r\n                field.lockedByClientId !== intercom.id;\r\n        if (lockedByOthers) {\r\n            canEdit = false && !isFrozen;\r\n        }\r\n        else {\r\n            canEdit = true && !isFrozen;\r\n        }\r\n    }\r\n    if (lockedByOthers) {\r\n        title = \"Field is locked by others\";\r\n    }\r\n    if (isFrozen) {\r\n        title = \"Field is frozen\";\r\n    }\r\n    lastGridData = gridData;\r\n}\r\nfunction toggleAutoLock() {\r\n    useAutoLock = !useAutoLock;\r\n}\r\nfunction onFocus() {\r\n    if (useAutoLock) {\r\n        intercom.send({ type: \"lock\", x, y });\r\n    }\r\n}\r\nfunction onBlur() {\r\n    intercom.send({ type: \"set-value\", x, y, value });\r\n    if (useAutoLock) {\r\n        intercom.send({ type: \"unlock\", x, y });\r\n    }\r\n}\r\nfunction freeze() {\r\n    intercom.send({ type: \"freeze\", x, y });\r\n}\r\nfunction unfreeze() {\r\n    intercom.send({ type: \"unfreeze\", x, y });\r\n}\r\nfunction askSteal() {\r\n    if (lockedByOthers) {\r\n        if (confirm(\"This field is locked by another client, do you want to steal the lock?\")) {\r\n            intercom.send({ type: \"steal-lock\", x, y });\r\n            canEdit = true;\r\n            // A small delay is required, otherwise the component is not editable\r\n            queueMicrotask(() => {\r\n                inputEl.focus();\r\n                inputEl.select();\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    input {\r\n        width: 3em;\r\n    }\r\n    button {\r\n        width: 2em;\r\n    }\r\n    .noAutoLock {\r\n        border-color: purple;\r\n    }\r\n    .lockedByOthers {\r\n        border-color: yellow;\r\n    }\r\n    .isFrozen {\r\n        border-color: red;\r\n    }\r\n</style>\r\n\r\n<input\r\n    bind:this={inputEl}\r\n    bind:value\r\n    class:noAutoLock={!useAutoLock}\r\n    class:lockedByOthers\r\n    class:isFrozen\r\n    on:focus={onFocus}\r\n    on:blur={onBlur}\r\n    on:dblclick={toggleAutoLock}\r\n    disabled={!canEdit}\r\n    {title} />\r\n{#if isFrozenByMe}\r\n    <button on:click={unfreeze}>ðŸ”‘</button>\r\n{:else}<button on:click={freeze}>ðŸ”’</button>{/if}\r\n<button\r\n    on:click={askSteal}\r\n    title=\"break lock\"\r\n    disabled={!lockedByOthers}>ðŸ’”</button>\r\n"
  ],
  "names": [],
  "mappings": "AAKC,UAAU,eAAC,CAAC,AACX,UAAU,CAAE,KAAK,CACjB,MAAM,CAAE,KAAK,CACb,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,GAAG,AAC/B,CAAC;ACGE,UAAU,eAAC,CAAC,AACR,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,KAAK,CACjB,MAAM,CAAE,KAAK,CACb,kBAAkB,CAAE,GAAG,CAAC,WAAW,AACvC,CAAC,AACD,mBAAI,CAAC,AACD,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,WAAW,eAAC,CAAC,AACT,UAAU,CAAE,UAAU,CACtB,OAAO,CAAE,GAAG,CACZ,gBAAgB,CAAE,QAAQ,CAC1B,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,KAAK,eAAC,CAAC,AACH,SAAS,CAAE,CAAC,CACZ,WAAW,CAAE,CAAC,AAClB,CAAC;AC5BD,UAAU,eAAC,CAAC,AACR,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,KAAK,CAAC,GAAG,CAChC,aAAa,CAAE,KAAK,AACxB,CAAC,AACD,mBAAI,CAAC,AACD,WAAW,CAAE,GAAG,AACpB,CAAC;AC8DD,KAAK,cAAC,CAAC,AACH,KAAK,CAAE,GAAG,AACd,CAAC,AACD,MAAM,cAAC,CAAC,AACJ,KAAK,CAAE,GAAG,AACd,CAAC,AACD,WAAW,cAAC,CAAC,AACT,YAAY,CAAE,MAAM,AACxB,CAAC,AACD,eAAe,cAAC,CAAC,AACb,YAAY,CAAE,MAAM,AACxB,CAAC,AACD,SAAS,cAAC,CAAC,AACP,YAAY,CAAE,GAAG,AACrB,CAAC"
}